### **“蹦跳小火箭 V3.0 (ESP32-C3Mini)” 完整设计方案**

#### **1. 项目概述**

*   **项目名称：** 蹦跳小火箭 V3.0：星际远征版
*   **目标用户：** 小学生群体 (6-12岁)。
*   **核心理念：** （保持不变）将户外跳跃运动游戏化，通过“为火箭充能并发射”的故事主线，结合丰富的视听反馈和灵活的交互，培养其健康的生活习惯。
*   **技术核心升级：** 采用性能强大、自带Wi-Fi和蓝牙功能的**ESP32-Mini**作为主控，极大地简化了硬件电路，并为未来的智能互联功能（如小程序数据同步）做好了充分准备。

#### **2. 设计理念与创新亮点**

*(保持V3.0原有亮点，并增加由ESP32带来的新优势)*

*   **个性化挑战：** “容易、普通、困难”三档难度选择。
*   **长期激励与数据闭环：** 最近7日数据回顾和每日数据累加。
*   **科学健身引导：** 独立的目标计时器和奖励机制。
*   **高度集成与低功耗 (ESP32优势)：** ESP32本身集成了强大的处理器和无线功能，且支持深度睡眠模式。这使得设备在待机时可以实现**极低的功耗**，大大延长电池续航时间，更符合“便携独立供电”的要求。
*   **面向未来的可扩展性 (ESP32优势)：** 内置的蓝牙和Wi-Fi功能，为后续升级到高中组方案（连接手机APP、获取网络天气等）提供了无缝的硬件支持，使项目具有完整的成长路径。

#### **3. 功能规格**

*(功能保持与原V3.0方案一致，但实现方式因硬件变化而优化)*

*   **难度选择系统**
*   **每日数据累积与存储**
*   **历史数据查看**
*   **目标计时提醒**
*   **核心游戏化功能** (状态管理、跳跃识别、发射结算等)
*   **视听反馈系统**

#### **4. 硬件设计与元器件选型 (基于ESP32-C3Mini)**

##### **4.1 核心硬件清单**

1.  **主控核心：** **ESP32-C3 Mini** 。
    *   **优势：** 体积小巧，性能强大，自带Wi-Fi和蓝牙，支持低功耗模式。

2.  **运动感知：** **MPU6050** 六轴陀螺仪加速度计。
    *   **连接：** 通过I2C接口与ESP32连接。

3.  **显示单元：** **0.96寸 SH1106/SSD1306 OLED显示屏 (I2C版)**。
    *   **连接：** 与MPU6050共用I2C总线，连接到ESP32的同一对I2C引脚。

4.  **声音反馈：** **无源蜂鸣器 (Passive Buzzer)**。
    *   **连接：** 连接到ESP32的一个GPIO引脚（ESP32的任意GPIO都可配置为PWM输出，非常灵活）。

5.  **用户交互：** **一个轻触按钮 (Tactile Switch)**。
    *   **连接：** 连接到ESP32的一个GPIO引脚，程序内实现单击、双击和长按的逻辑判断。

6.  **本地存储：**
    *   **首选方案：利用ESP32内置的SPIFFS或LittleFS文件系统。**
    *   **巨大优势：** ESP32开发板通常自带4MB或更多的Flash存储空间。我们可以创建一个文件系统（SPIFFS/LittleFS），直接将每天的运动数据以**文本文件（如.txt或.json）**的形式存储。
    *   **相比EEPROM的优点：**
        *   **容量巨大：** 可以存储远不止7天的数据，甚至可以记录每一次游戏的详细日志。
        *   **读写方便：** 像操作电脑文件一样进行读写，更直观，也更容易调试。
        *   **无需额外硬件：** 完全利用了ESP32自身的资源。

7.  **电源管理：**
    *   **电池：** 3.7V小型锂聚合物电池。
    *   **充放电管理模块：** **扩展板自带**。它负责为锂电池安全充电，并提供稳定的5V或3.3V输出给ESP32。

##### **4.2 硬件设计思考**

*   **电路极简化：** 由于ESP32的高度集成性，**不再需要独立的RTC时钟模块**。ESP32可以在连接Wi-Fi时通过NTP（网络时间协议）自动同步网络时间，从而获得准确的日期。在无法联网的情况下，其内部时钟也能维持一定时间的计时（尽管长期会有漂移，但对于7天记录来说足够）。
*   **低功耗设计：** 在待机状态（如夜间或长时间不使用），可以编程让ESP32进入**深度睡眠模式(Deep Sleep)**，此时功耗极低。仅通过按钮中断或MPU6050的运动中断来唤醒设备，大大延长续航。

#### **5. 物理设计**

*   **外壳：** 保持流线型火箭设计。由于ESP32-Mini开发板通常比Arduino Nano更窄长，内部空间布局可能需要微调，但整体尺寸可以保持小巧。
*   **天线考量：** ESP32的板载天线区域应避免被金属部件或电池完全覆盖，以保证未来使用Wi-Fi或蓝牙时的信号质量。在3D打印外壳时，可以在天线对应位置使用更薄的壁厚。

####   **~~6. 未来拓展思考 (基于ESP32)~~** 

~~ESP32的强大潜力使得这个项目的未来拓展变得非常令人兴奋：~~

*   ~~**无线固件升级 (OTA)：** 可以通过Wi-Fi为“小火箭”远程更新程序，修复bug或增加新功能，而无需连接USB线。~~
*   ~~**微信小程序互联：** 利用ESP32的蓝牙功能，开发一个微信小程序。孩子运动结束后，可以一键将数据同步到小程序中，生成漂亮的图表，并与家人分享，甚至在家庭排行榜中一较高下。~~
*   ~~**云端数据存储：** 通过Wi-Fi，可以将运动数据上传到免费的物联网云平台（如Blynk, ThingsBoard），实现数据的永久保存和远程查看。~~
*   ~~**天气与环境感知：** 可以通过Wi-Fi获取实时天气预报、空气质量(AQI)等信息，在OLED屏幕上显示，为户外运动提供更科学的决策建议，完美契合高中组的要求。~~

通过将主控升级为ESP32-Mini，**“蹦跳小火箭 V3.0”**不仅在现有功能上实现得更优雅、更高效，更一举推开了通往“智能物联”世界的大门，使其成为一个技术先进、功能完备且极具发展潜力的优秀项目。