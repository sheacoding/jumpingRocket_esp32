# 蹦跳小火箭 V2.0 - ESP32项目

## 项目概述

蹦跳小火箭 V2.0 是一个基于ESP32的智能健身伴侣项目，专为6-12岁的小学生群体设计。通过游戏化的方式将单调的跳跃运动转化为有趣的"火箭发射"体验，激发孩子们的运动兴趣。

## 核心特性

### 🎮 游戏化设计
- **故事驱动**：以"为火箭充能并发射"为核心故事线
- **实时反馈**：视觉(OLED动画) + 听觉(蜂鸣器音效)双重反馈
- **成就系统**：基于跳跃次数和时长计算飞行高度分数

### 🔧 硬件功能
- **跳跃识别**：基于MPU6050加速度传感器的智能跳跃检测算法
- **显示系统**：128x64 OLED屏幕显示游戏界面和数据
- **音效系统**：无源蜂鸣器播放各种游戏音效
- **交互控制**：单按钮多功能设计（短按/长按）

### 🎯 游戏状态
1. **待机状态**：等待用户开始游戏
2. **游戏中**：实时显示跳跃数据和燃料进度
3. **暂停状态**：可暂停/继续游戏
4. **重置确认**：防误触的重置确认机制
5. **结算状态**：显示火箭发射动画和最终成绩

## 硬件配置

### 主要组件
- **主控**：ESP32开发板
- **传感器**：MPU6050加速度传感器
- **显示**：128x64 OLED显示屏 (SSD1306)
- **音频**：无源蜂鸣器
- **交互**：按钮开关
- **电源**：电池供电系统

### 引脚连接
```
MPU6050:
- VCC -> 3.3V
- GND -> GND
- SCL -> GPIO22
- SDA -> GPIO21

OLED (SSD1306):
- VCC -> 3.3V
- GND -> GND
- SCL -> GPIO22
- SDA -> GPIO21

蜂鸣器:
- 正极 -> GPIO25
- 负极 -> GND

按钮:
- 一端 -> GPIO0
- 另一端 -> GND
```

## 软件架构

### 模块化设计
- **hardware.c**：硬件抽象层，负责各硬件模块的初始化和驱动
- **sensor.c**：传感器数据处理和跳跃识别算法
- **display.c**：OLED显示系统，包含各种界面和动画
- **sound.c**：音效系统，负责各种游戏音效的播放
- **button.c**：按钮交互控制，支持短按/长按识别
- **game.c**：游戏状态机和核心逻辑
- **data_processor.c**：数据处理和统计分析
- **main.c**：主程序，任务创建和系统监控

### 核心算法

#### 跳跃识别算法
- 基于加速度幅值变化检测跳跃动作
- 低通滤波器减少噪声干扰
- 状态机确保跳跃检测的准确性
- 冷却机制防止重复检测

#### 数据计算
- **燃料进度**：基于跳跃次数和时长计算
- **飞行高度**：综合考虑跳跃次数、时长和燃料奖励
- **运动强度**：基于跳跃频率和持续时间评估
- **卡路里消耗**：简单的卡路里估算模型

## 编译和部署

### 环境要求
- PlatformIO IDE
- ESP32开发环境
- Arduino框架

### 编译步骤
1. 克隆项目到本地
2. 使用PlatformIO打开项目
3. 安装依赖库：
   - ESP8266 and ESP32 OLED driver for SSD1306 displays
   - Adafruit MPU6050
   - Adafruit Unified Sensor
4. 编译并上传到ESP32

```bash
pio run --target upload
```

### 监控调试
```bash
pio device monitor
```

## 使用说明

### 基本操作
1. **开始游戏**：在待机状态下跳跃一次或按任意键
2. **暂停/继续**：游戏中短按按钮
3. **重置游戏**：长按按钮进入重置确认，再次长按确认重置
4. **查看结果**：游戏结束后自动进入结算界面

### 游戏提示
- 保持稳定的跳跃频率可获得更高分数
- 燃料满格时会获得额外的高度奖励
- 建议连续运动5-10分钟以获得最佳体验

## 性能特点

### 技术亮点
- **实时性**：50Hz传感器采样，20FPS显示更新
- **稳定性**：状态机设计确保程序逻辑清晰
- **用户体验**：防误触机制和直观的界面设计
- **扩展性**：模块化架构便于功能扩展

### 系统资源
- **内存使用**：约80KB RAM
- **存储空间**：约200KB Flash
- **功耗**：正常运行约100mA

## 开发团队

本项目基于详细的设计文档实现，包含完整的硬件设计、软件架构和用户体验设计。

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 更新日志

### V2.0 (当前版本)
- 完整的游戏化设计
- 智能跳跃识别算法
- 丰富的视听反馈
- 数据统计和分析功能
- 模块化软件架构

---

**注意**：本项目为教育和娱乐目的设计，使用时请注意安全，确保在适当的环境中进行跳跃运动。
