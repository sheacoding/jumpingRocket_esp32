# 蹦跳小火箭 V2.0 - 硬件调试指南

## 🔧 硬件连接检查

### ESP32引脚连接
```
OLED SSD1306 (128x64):
├── VCC  -> ESP32 3.3V
├── GND  -> ESP32 GND  
├── SCL  -> ESP32 GPIO22
└── SDA  -> ESP32 GPIO21

MPU6050 加速度传感器:
├── VCC  -> ESP32 3.3V
├── GND  -> ESP32 GND
├── SCL  -> ESP32 GPIO22 (与OLED共享)
└── SDA  -> ESP32 GPIO21 (与OLED共享)

按钮:
├── 一端 -> ESP32 GPIO2
└── 另一端 -> ESP32 GND

蜂鸣器 (无源):
├── 正极 -> ESP32 GPIO25
└── 负极 -> ESP32 GND
```

## 📊 调试输出说明

### 1. 启动信息
程序启动后会显示：
```
========================================
蹦跳小火箭 V2.0 - 硬件初始化开始
========================================
引脚配置:
  I2C SCL: GPIO22
  I2C SDA: GPIO21
  按钮:    GPIO2
  蜂鸣器:  GPIO25
```

### 2. I2C设备扫描
系统会自动扫描I2C总线上的设备：
```
开始I2C设备扫描...
扫描地址范围: 0x08 - 0x77
发现I2C设备，地址: 0x3C (OLED SSD1306)
发现I2C设备，地址: 0x68 (MPU6050)
总共发现 2 个I2C设备
I2C扫描完成
```

### 3. 硬件初始化状态
每个硬件模块的初始化状态：
```
1. 初始化蜂鸣器...
✅ 蜂鸣器初始化成功

2. 初始化按钮...
✅ 按钮初始化成功

3. 初始化MPU6050传感器...
MPU6050连接成功
MPU6050 WHO_AM_I: 0x68
MPU6050验证成功
✅ MPU6050初始化成功

4. 初始化OLED显示屏...
OLED I2C连接成功
发送OLED初始化命令...
清屏测试...
显示测试文本...
✅ OLED初始化成功
```

## 🚨 常见问题排除

### OLED显示问题

#### 问题1: "OLED I2C连接失败"
**可能原因:**
- 接线错误
- 供电不足
- OLED地址不正确

**解决方案:**
1. 检查接线：
   - VCC接3.3V（不是5V！）
   - GND接地
   - SCL接GPIO22
   - SDA接GPIO21

2. 检查OLED地址：
   - 大多数SSD1306是0x3C
   - 有些可能是0x3D
   - 查看I2C扫描结果

#### 问题2: OLED连接成功但无显示
**可能原因:**
- 初始化命令序列问题
- 显示对比度过低
- 硬件故障

**解决方案:**
1. 查看串口输出中的"显示测试文本"
2. 尝试调整对比度（代码中0xCF值）
3. 检查OLED是否有物理损坏

### MPU6050传感器问题

#### 问题1: "MPU6050连接失败"
**解决方案:**
1. 检查I2C接线
2. 确认传感器供电正常
3. 检查地址（通常是0x68）

#### 问题2: WHO_AM_I验证失败
**解决方案:**
1. 确认是MPU6050而不是其他传感器
2. 检查传感器是否损坏
3. 尝试重新上电

### 按钮和蜂鸣器问题

#### 按钮无响应
**解决方案:**
1. 检查GPIO2连接
2. 确认按钮另一端接GND
3. 测试按钮是否导通

#### 蜂鸣器无声音
**解决方案:**
1. 确认是无源蜂鸣器
2. 检查GPIO25连接
3. 听初始化时的"滴"声

## 🔍 调试步骤

### 步骤1: 检查串口输出
1. 打开串口监视器（115200波特率）
2. 重启ESP32
3. 观察初始化过程

### 步骤2: I2C设备检测
如果I2C扫描没有发现设备：
1. 检查所有I2C连接
2. 确认设备供电
3. 尝试降低I2C时钟频率

### 步骤3: 逐个测试硬件
1. 先测试蜂鸣器（应该有初始化音效）
2. 再测试按钮（按下应该有反应）
3. 最后测试传感器和显示

### 步骤4: OLED专项测试
如果OLED仍无显示：
1. 确认I2C扫描能找到0x3C设备
2. 检查初始化命令是否全部成功
3. 观察是否有"显示测试文本"输出

## 📱 预期行为

### 正常启动流程
1. **开机音效**: 短促的"滴"声
2. **I2C扫描**: 发现OLED和MPU6050
3. **OLED测试**: 显示边框和"OK"图案
4. **成功音效**: 四个音调的上升旋律
5. **游戏就绪**: 进入待机状态

### OLED显示内容
初始化成功后，OLED应该显示：
- 边框（顶部、底部、左右）
- 中间区域的简单图案
- 表示"OLED OK"的像素图案

## 💡 提示

1. **供电**: 确保ESP32供电充足，USB供电通常足够
2. **接线**: 使用短而粗的杜邦线，减少信号干扰
3. **调试**: 串口输出是最重要的调试信息来源
4. **耐心**: 硬件问题通常是接线问题，仔细检查每个连接

如果按照以上步骤仍有问题，请提供完整的串口输出信息以便进一步诊断。
